<div *ngIf="displaySuccessMessage; then message else form"></div>

<ng-template #message>
  <div class="container">
    <p>user added successfully</p>
    <p>user id: {{userRequest!.userId}}</p>
    <p>password: {{userRequest!.password}}</p>
    <button (click)="cancel.emit()">close</button>
  </div>
</ng-template>

<ng-template #form>
<form [formGroup]="editUserForm">
  <mat-form-field>
    <mat-label>User Id</mat-label>
    <input id="userid" [readOnly]="isEditForm" matInput formControlName="userId">
    <mat-error *ngIf="expUserId?.errors?.['required']">
      id field is required
    </mat-error>
    <mat-error *ngIf="expUserId?.errors?.['minlength']|| expUserId?.errors?.['maxlength']">
      id must be 8 digits
    </mat-error>
    <mat-error *ngIf="expUserId?.errors?.['idAlreadyExists']">
      id already exists
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>First Name</mat-label>
    <input [readOnly]="isEditForm" matInput formControlName="firstName">
    <mat-error *ngIf="expFirstName?.errors?.['required']">
      first name is required
    </mat-error>
    <mat-error *ngIf="expFirstName?.errors?.['maxlength']">
      cannot be longer then 40 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Last Name</mat-label>
    <input [readOnly]="isEditForm" matInput formControlName="lastName">
    <mat-error *ngIf="expLastName?.errors?.['required']">
      last name is required
    </mat-error>
    <mat-error *ngIf="expLastName?.errors?.['maxlength']">
      cannot be longer then 40 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Middle Name</mat-label>
    <input [readOnly]="isEditForm" matInput formControlName="middleName">
    <mat-error *ngIf="expLastName?.errors?.['maxlength']">
      cannot be longer then 40 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Email</mat-label>
    <input [readOnly]="isEditForm" matInput formControlName="email">
    <mat-error *ngIf="expLastName?.errors?.['required']">
      last name is required
    </mat-error>
    <mat-error *ngIf="expLastName?.errors?.['validateEmail']">
      email must end with @corporate.com
    </mat-error>
    <mat-error *ngIf="expLastName?.errors?.['emailAlreadyExists']">
      email already exists
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Email</mat-label>
    <input [readOnly]="isEditForm" matInput formControlName="email">
    <mat-error *ngIf="expLastName?.errors?.['required']">
      last name is required
    </mat-error>
    <mat-error *ngIf="expLastName?.errors?.['validateEmail']">
      email must end with @corporate.com
    </mat-error>
    <mat-error *ngIf="expLastName?.errors?.['emailAlreadyExists']">
      email already exists
    </mat-error>
  </mat-form-field>

  <mat-form-field Role="fill">
    <mat-label>Role</mat-label>
    <mat-select formControlName="role" [(value)]="selected">
      <mat-option *ngFor="let state of states" [value]="state">{{state}}</mat-option>
    </mat-select>
  </mat-form-field>

  <section class="example-section" >
    <mat-checkbox class="example-margin" [checked]="expActive?.value">active</mat-checkbox>
  </section>

    <div [hidden]="!passwordChanged">
      new password: {{password}}
    </div>


  <div [hidden]="!isEditForm">
    <button (click)="resetPassword()"  mat-button >generate new password</button>
  </div>

  <button (click)="AddOrUpdateUser()" mat-button [disabled]="">save</button>
  <button (click)="cancel.emit()" mat-button>cancel</button>
</form>
</ng-template>
